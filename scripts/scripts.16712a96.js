"use strict";angular.module("clientApp",["ngRoute","uiGmapgoogle-maps","restangular"]).config(["$routeProvider","RestangularProvider","uiGmapGoogleMapApiProvider",function(a,b,c){b.setBaseUrl("http://localhost:3000"),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/movies",{templateUrl:"views/movies.html",controller:"MoviesCtrl"}).when("/create/movie",{templateUrl:"views/movie-add.html",controller:"MovieAddCtrl"}).when("/movie/:id",{templateUrl:"views/movie-view.html",controller:"MovieViewCtrl"}).when("/movie/:id/delete",{templateUrl:"views/movie-delete.html",controller:"MovieDeleteCtrl"}).when("/movie/:id/edit",{templateUrl:"views/movie-edit.html",controller:"MovieEditCtrl"}).when("/create/specify_location",{templateUrl:"views/specify-location-type.html",controller:"SpecifyLocationTypeCtrl"}).when("/create/specify-manually",{templateUrl:"views/manual-location-entry.html",controller:"ManualLocationEntryCtrl"}).when("/create/selectNumberOfCars",{templateUrl:"views/select-number-of-cars.html",controller:"SelectNumberOfCarsCtrl"}).when("/create/inputDriverInfo",{templateUrl:"views/input-driver-info.html",controller:"InputDriverInfoCtrl"}).when("/create/sketchMap",{templateUrl:"views/interactive-map-drawing.html",controller:"InteractiveMapDrawingCtrl"}).when("/create/provideWrittenReport",{templateUrl:"views/provide-written-report.html",controller:"ProvideWrittenReportCtrl"}).when("/create/typeOfCrash",{templateUrl:"views/type-of-crash.html",controller:"TypeOfCrashCtrl"}).otherwise({redirectTo:"/"})}]).factory("MovieRestangular",["Restangular",function(a){return a.withConfig(function(a){a.setRestangularFields({id:"_id"})})}]).factory("Movie",["MovieRestangular",function(a){return a.service("movie")}]),angular.module("clientApp").controller("MainCtrl",["$scope",function(a){var b=document.getElementsByTagName("li"),c=angular.element(b[0]),d=angular.element(b[1]),e=angular.element(b[2]);c.addClass("active"),e.removeClass("active"),d.removeClass("active")}]),angular.module("clientApp").controller("AboutCtrl",["$scope","$location",function(a,b){var c=document.getElementsByTagName("li"),d=angular.element(c[0]),e=angular.element(c[1]),f=angular.element(c[2]);d.removeClass("active"),f.removeClass("active"),e.addClass("active"),a.agencyData=[],a.agencyData.length=13,a.inputNameValue="",a.buttonText="Next",a.caseOpenText="Case Open",a.reportableCrashText="Non-Reportable Crash",a.caseOpen=!0,a.reportableCrash=!1,a.toggleCaseOpen=function(b){0==b?(a.caseOpenText="Case Closed",a.caseOpen=!1):(a.caseOpenText="Case Open",a.caseOpen=!0)},a.toggleReportableCrash=function(b){0==b?(a.reportableCrashText="Non-Reportable Crash",a.reportableCrash=!1):(a.reportableCrashText="Reportable Crash",a.reportableCrash=!0)},a["continue"]=function(){b.path("/create/specify_location")},a.getDate=function(){a.agencyData[1]=new Date},a.getReviewDate=function(){a.agencyData[12]=new Date},a.getDispatchTime=function(){a.agencyData[4]=g()},a.getArrivalTime=function(){a.agencyData[5]=g()};var g=function(){var a=new Date,b=a.getHours(),c=a.getMinutes(),d=a.getSeconds();return b+":"+c+":"+d}}]),angular.module("clientApp").controller("MoviesCtrl",["$scope","Movie",function(a,b){var c=document.getElementsByTagName("li"),d=angular.element(c[0]),e=angular.element(c[1]),f=angular.element(c[2]);d.removeClass("active"),f.addClass("active"),e.removeClass("active"),a.movies=b.getList().$object}]),angular.module("clientApp").controller("MovieAddCtrl",["$scope","Movie","$location",function(a,b,c){a.movie={},a.saveMovie=function(){b.post(a.movie).then(function(){c.path("/movies")})}}]),angular.module("clientApp").controller("MovieViewCtrl",["$scope","$routeParams","Movie",function(a,b,c){a.viewMovie=!0,a.movie=c.one(b.id).get().$object}]),angular.module("clientApp").controller("MovieDeleteCtrl",["$scope","$routeParams","Movie","$location",function(a,b,c,d){a.movie=c.one(b.id).get().$object,a.deleteMovie=function(){a.movie.remove().then(function(){d.path("/movies")})},a.back=function(){d.path("/movie/"+b.id)}}]),angular.module("clientApp").controller("MovieEditCtrl",["$scope","$routeParams","Movie","$location",function(a,b,c,d){a.editMovie=!0,a.movie={},c.one(b.id).get().then(function(c){a.movie=c,a.saveMovie=function(){a.movie.save().then(function(){d.path("/movie/"+b.id)})}})}]),angular.module("clientApp").controller("SpecifyLocationTypeCtrl",["$scope","$location",function(a,b){a.inputNameValue="",a.buttonText="Next",a.setLocationManually=function(a){b.path("/create/typeOfCrash")},a.setLocationAutomatically=function(a){}}]);var app=angular.module("clientApp");app.controller("ManualLocationEntryCtrl",["$scope","$location","$rootScope",function(a,b,c){function d(a){for(var b=0,c=a.routes[0],d=0;d<c.legs.length;d++)b+=c.legs[d].distance.value;return b=b/1e3*.621371,parseFloat(b).toFixed(2)}function e(b){l.geocode({location:b},function(b,c){b[1]&&(a.intersectingRoadInfo[0]=b[0].address_components[1].long_name,a.$apply())})}function f(){l.geocode({location:n[2].getPosition()},function(b,c){b[1]&&(a.intersectingRoadInfo[1]=b[0].address_components[1].long_name,a.$apply())})}function g(){l.geocode({location:n[1].getPosition()},function(b,c){b[1]&&(a.intersectingRoadInfo[0]=b[0].address_components[1].long_name)});var b={origin:n[1].getPosition(),destination:m.getPosition(),travelMode:google.maps.TravelMode.DRIVING};k.route(b,function(b,c){c==google.maps.DirectionsStatus.OK&&(j.setDirections(b),a.intersectingRoadInfo[2]=d(j.getDirections())+" Miles")}),a.$apply()}function h(b){var e=new google.maps.InfoWindow;a.geoCodeCoords[0]=b,l.geocode({location:b},function(b,f){if(f==google.maps.GeocoderStatus.OK)if(b[1]){if(a.geoCodeCoords[1]=b[0].address_components[0].long_name+", "+b[0].address_components[1].long_name,a.geoCodeCoords[2]=b[0].address_components[4].long_name,a.geoCodeCoords[3]=b[0].address_components[2].long_name+" "+b[0].address_components[3].long_name,a.isMidBlock){var g={origin:n[1].getPosition(),destination:m.getPosition(),travelMode:google.maps.TravelMode.DRIVING};k.route(g,function(b,c){c==google.maps.DirectionsStatus.OK&&(j.setDirections(b),a.intersectingRoadInfo[2]=d(j.getDirections())+" Miles")})}e.setContent("Drag to position of crash"),e.open(c.map,m),a.$apply()}else window.alert("No results found");else window.alert("Geocoder failed due to: "+f)})}var i={draggable:!0},j=new google.maps.DirectionsRenderer(i),k=new google.maps.DirectionsService;a.haveGeocoded=!1,a.buttonText="Geocode",a.geoCodeCoords=[],a.isOther=!1,a.isIntersection=!1,a.isMidBlock=!1,a.typeOfMainRoad="Route Signing";var l=new google.maps.Geocoder;a.routeSigning=["Interstate","Turnpike","Turnpike spur","State Highway","County Road","Local Road or Street","Private Road","Other"];var m,n=[];a.intersectingRoadInfo=[],a.midBlockPositionInfo=[],a.getRouteTypeOfMainRoad=function(b){a.typeOfMainRoad=a.routeSigning[b]},a.getRouteTypeOfIntersectingRoad=function(b){a.typeOfIntersectionRoat=a.routeSigning[b]},a.reverseGeocode=function(){a.haveGeocoded=!0;var b=new google.maps.InfoWindow,d=[],i=[];i[0]=new google.maps.LatLng(c.map.center.lat(),c.map.center.lng()),i[1]=new google.maps.LatLng(c.map.center.lat(),c.map.center.lng()+5e-4),i[2]=new google.maps.LatLng(c.map.center.lat(),c.map.center.lng()-5e-4);var k="FE7569",l=new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|"+k,new google.maps.Size(21,34),new google.maps.Point(0,0),new google.maps.Point(10,34)),o=new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",new google.maps.Size(40,37),new google.maps.Point(0,0),new google.maps.Point(12,35));if(0==c.crashType){a.isMidBlock=!0,j.setMap(c.map);for(var p=1;3>p;p++)n[p]=new google.maps.Marker({draggable:!0,position:i[p],map:c.map,icon:l,shadow:o}),d[p-1]=new google.maps.InfoWindow,d[p-1].setContent("Drag to position of landmark "+p),d[p-1].open(c.map,n[p]);google.maps.event.addListener(n[1],"dragend",function(){g()}),google.maps.event.addListener(n[2],"dragend",function(){f()})}else 1==c.crashType&&(a.isIntersection=!0,n[0]=new google.maps.Marker({draggable:!0,position:i[1],map:c.map,icon:l,shadow:o}),d[0]=new google.maps.InfoWindow,d[0].setContent("Drag Anywhere On Intersecting Street"),d[0].open(c.map,n[0]),google.maps.event.addListener(n[0],"dragend",function(){e(n[0].getPosition())}));m=new google.maps.Marker({draggable:!0,position:i[0],map:c.map}),b.setContent("Drag to position of crash"),b.open(c.map,m),google.maps.event.addListener(m,"dragend",function(){h(m.getPosition())})},a["continue"]=function(){b.path("/create/selectNumberOfCars")},a.loc={lat:40,lon:-73},a.gotoCurrentLocation=function(){return"geolocation"in navigator?(navigator.geolocation.getCurrentPosition(function(b){var c=b.coords;a.gotoLocation(c.latitude,c.longitude)}),!0):!1},a.gotoLocation=function(b,c){(a.lat!==b||a.lon!==c)&&(a.loc={lat:b,lon:c},a.$$phase||a.$apply("loc"))},a.search="",a.geoCode=function(){a.search&&a.search.length>0&&(this.geocoder||(this.geocoder=new google.maps.Geocoder),this.geocoder.geocode({address:a.search},function(b,c){if(c==google.maps.GeocoderStatus.OK){var d=b[0].geometry.location;a.search=b[0].formatted_address,a.gotoLocation(d.lat(),d.lng())}else alert("Sorry, this search produced no results.")}))}}]),app.filter("lat",function(){return function(a,b){b||(b=0),a=1*a;var c=a>0?"N":"S";a=Math.abs(a);var d=Math.floor(a),e=Math.floor(60*(a-d)),f=(3600*(a-d-e/60)).toFixed(b);return d+"°"+e+"'"+f+'"'+c}}),app.filter("lon",function(){return function(a,b){b||(b=0),a=1*a;var c=a>0?"E":"W";a=Math.abs(a);var d=Math.floor(a),e=Math.floor(60*(a-d)),f=(3600*(a-d-e/60)).toFixed(b);return d+"°"+e+"'"+f+'"'+c}}),app.directive("appMap",["$rootScope",function(a){return{restrict:"E",replace:!0,template:"<div></div>",scope:{center:"=",markers:"=",width:"@",height:"@",zoom:"@",mapTypeId:"@",panControl:"@",zoomControl:"@",scaleControl:"@"},link:function(b,c,d){function e(){b.width&&c.width(b.width),b.height&&c.height(b.height);var d={center:new google.maps.LatLng(40,-73),zoom:6,mapTypeId:"hybrid"};b.center&&(d.center=g(b.center)),b.zoom&&(d.zoom=1*b.zoom),b.mapTypeId&&(d.mapTypeId=b.mapTypeId),b.panControl&&(d.panControl=b.panControl),b.zoomControl&&(d.zoomControl=b.zoomControl),b.scaleControl&&(d.scaleControl=b.scaleControl),i=new google.maps.Map(c[0],d),a.map=i;var e=[],j=document.getElementById("pac-input"),k=new google.maps.places.SearchBox(j);google.maps.event.addListener(k,"places_changed",function(){var a=k.getPlaces();if(0!=a.length){for(var b,c=0;b=e[c];c++)b.setMap(null);for(var d,f=new google.maps.LatLngBounds,c=0;d=a[c];c++){var g={url:d.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},b=new google.maps.Marker({map:i,icon:g,title:d.name,position:d.geometry.location});e.push(b),f.extend(d.geometry.location)}i.fitBounds(f)}}),f(),google.maps.event.addListener(i,"center_changed",function(){h&&clearTimeout(h),h=setTimeout(function(){b.center&&(i.center.lat()!==b.center.lat||i.center.lng()!==b.center.lon)&&(b.center={lat:i.center.lat(),lon:i.center.lng()},a.transferredMapCenter={center:{latitude:i.center.lat(),longitude:i.center.lng()},zoom:i.zoom},b.$$phase||b.$apply("center"))},500)})}function f(){if(i&&b.markers){if(null!==j)for(var a=0;a<j.length;a++)j[a]=d.setMap(null);j=[];var c=b.markers;angular.isString(c)&&(c=b.$eval(b.markers));for(var a=0;a<c.length;a++){var d=c[a],e=new google.maps.LatLng(d.lat,d.lon),f=new google.maps.Marker({position:e,map:i,title:d.name});j.push(f)}}}function g(a){return null==a?new google.maps.LatLng(40,-73):(angular.isString(a)&&(a=b.$eval(a)),new google.maps.LatLng(a.lat,a.lon))}for(var h,i,j,k=["width","height","markers","mapTypeId","panControl","zoomControl","scaleControl"],l=0,m=k.length;l<k.length;l++)b.$watch(k[l],function(){m--,0>=m&&e()});b.$watch("zoom",function(){i&&b.zoom&&i.setZoom(1*b.zoom)}),b.$watch("center",function(){i&&b.center&&i.setCenter(g(b.center))})}}}]),angular.module("clientApp").controller("SelectNumberOfCarsCtrl",["$scope","$location","$rootScope",function(a,b,c){c.tcd="Select a TCD",c.tcdFunction="Select TCD Function",c.timeLaneClosed="Select Time Lane Closed",c.typeOfLaneClosed="Was the Lane Closed?",c.wasTrafficDetoured="Was Traffic Detoured?",c.directionOfLaneClosure="Lane Closure Direction",c.numberOfInjuries="",c.numberOfDeaths="",c.numberOfCars="",c.numberOfPeople="",c.workZoneRelated=!1,c.schoolBusRelated=!1,c.schoolZoneRelated=!1,c.notifyPenndot=!1,a.tcdArray=["Not Applicable","Flashing Traffic Signal","Traffic Signal","Stop Sign","Yield Sign","Active RR Crossing","Passive RR Crossing Controls","Police Officer or Flagman","Other Type TCD","Unknown"],a.tcdFunctionsArray=["No Controls","Device Not Functioning","Device Functioning Improperly","Device Functioning Properly","Emergency Signal","Unknown"],a.timeClosed=["< 30 Min.","30-60 Min.","1-3 Hrs.","3-6 Hrs.","6-9 Hrs.","> 9 Hrs.","Unknown"],a.laneClosedType=["Not Applicable","Partially","Fully","Unknown"],a.trafficDetoured=["Yes","No","Unknown"],a.laneClosureDirection=["North","South","East","West","North and South","East and West","All"],a.doneWithNumbers=!1,a.doneWithBooleans=!0,a.displayErrorMessage=!1,a.showContinueButton=!1,a.doneWithSelects=!0,a.numberOfCurrent="",a.outputMessage="",a.questionMessage="How many cars were involved?";var d=0;a.numberWasPressed=function(b){if(isNaN(b))a.outputMessage="Please Input a Number";else switch(d){case 0:c.numberOfCars=b,a.numberOfCurrent="",a.questionMessage="How many people were involved?",d++;break;case 1:c.numberOfPeople=b,a.numberOfCurrent="",a.questionMessage="How many people were injured?",d++;break;case 2:c.numberOfInjuries=b,a.numberOfCurrent="",a.questionMessage="How many people were killed?",d++;break;case 3:c.numberOfDeaths=b,a.questionMessage="Was this crash work zone related?",a.doneWithNumbers=!0,a.doneWithBooleans=!1,d++}},a.booleanWasPressed=function(b){switch(d){case 4:a.questionMessage="Was this crash school bus related?",c.workZoneRelated=b,d++;break;case 5:a.questionMessage="Was this crash school zone related?",c.schoolBusRelated=b,d++;break;case 6:a.questionMessage="Was penndot maintenence notified?",c.schoolZoneRelated=b,d++;break;case 7:a.questionMessage="Just a few more things...",a.doneWithBooleans=!0,a.doneWithSelects=!1,c.notifyPenndot=b,a.showContinueButton=!0}},a.allSet=[!1,!1,!1,!1,!1,!1],a.setTcd=function(b){c.tcd=a.tcdArray[b],a.allSet[0]=!0},a.setTcdFunction=function(b){c.tcdFunction=a.tcdFunctionsArray[b],a.allSet[1]=!0},a.setTimeClosed=function(b){c.timeLaneClosed=a.timeClosed[b],a.allSet[2]=!0},a.setLaneClosedType=function(b){c.typeOfLaneClosed=a.laneClosedType[b],a.allSet[3]=!0},a.setTrafficDetoured=function(b){c.wasTrafficDetoured=a.trafficDetoured[b],a.allSet[4]=!0},a.setLaneClosureDirection=function(b){c.directionOfLaneClosure=a.laneClosureDirection[b],a.allSet[5]=!0},a.continueButton=function(){for(var c=0;c<a.allSet.length;c++)if(0==a.allSet[c])return void(a.displayErrorMessage=!0);b.path("/create/inputDriverInfo")}}]),angular.module("clientApp").controller("InputDriverInfoCtrl",["$scope","$location","$rootScope",function(a,b,c){var d=[],e=c.numberOfCars;a.name="",a.dlNumber="",a.cellPhone="",a.address="",a.social="",a.email="",a.statement="",a.currentIndex=0,a.pagesWithErrors="",a.repeatHelper=[];for(var f=0;e>f;f++)a.repeatHelper[f]=f,d.push({name:a.name,dl_Number:a.dlNumber,cell_Number:a.cellPhone,address:a.address,social_Security:a.social,email:a.email,statement:a.statement});1==e&&(a.onLastPane=!0),a.createPagination=function(b){if(d[a.currentIndex]={name:a.name,dlNumber:a.dlNumber,cellPhone:a.cellPhone,address:a.address,social:a.social,email:a.email,statement:a.statement},1!==e){a.name="",a.dlNumber="",a.cellPhone="",a.address="",a.social="",a.email="",a.statement="",a.currentIndex=b;var c=d[a.currentIndex];a.name=c.name,a.dlNumber=c.dlNumber,a.cellPhone=c.cellPhone,a.address=c.address,a.social=c.social,a.email=c.email,a.statement=c.statement}a.currentIndex==e-1&&(a.onLastPane=!0)},a.continueButtonCtrl=function(){d[a.currentIndex]={name:a.name,dlNumber:a.dlNumber,cellPhone:a.cellPhone,address:a.address,social:a.social,email:a.email,statement:a.statement};var c=g();if(0==c.length)b.path("/create/sketchMap");else{a.displayErrorMessage=!0,a.pagesWithErrors="";for(var e=0;e<c.length;e++)a.pagesWithErrors+=c[e]+1+" "}};var g=function(){for(var a=[],b=0;e>b;b++){var c=d[b];(""==c.name||""==c.social||""==c.statement)&&a.push(b)}return a};a.moveToPreviousPage=function(){var b=a.currentIndex;1!==e&&(0==b?b=e:b--,a.createPagination(b))},a.moveToNextPage=function(){var b=a.currentIndex;1!==e&&(b==e?b=0:b++,a.createPagination(b))}}]),app=angular.module("clientApp"),app.controller("InteractiveMapDrawingCtrl",["$scope","$rootScope","$location","$timeout","$log","$interval","uiGmapIsReady",function(a,b,c,d,e,f,g){function h(a,b){var c=o[l].getPath();c.push(a.latLng)}function i(b){if(0==a.showDrawingIcon[b]){for(var c=0;n>c;c++)a.showPolylineIcon[c]=!0;a.showDrawingIcon[b]=!0}else{for(var d=0;n>d;d++)d!==b&&(a.showPolylineIcon[d]=!1);a.showDrawingIcon[b]=!1}}function j(a,c){var d;switch(a){case 0:d="#FF9494";break;case 1:d="#B2FFb2";break;case 2:d="#7575FF";break;default:d="#00ABD3"}c={path:"M73.3,134.1c0,0,8.6,19.1,12,20.5c3.4,1.4,11.4-3.8,11.4-3.8l-9.1-16.2L73.3,134.1z M74,20.6c0,0,8.8-19,12.3-20.4c3.4-1.4,11.3,4,11.3,4l-9.3,16L74,20.6z M5.1,106.5c-7-17.6-6.8-41.6,0.4-59.1c7.2-17.5,15.4-30,43.7-29c28.3,1,143.5,2.2,173.1,2.5 C252,21.2,259,54,259,54l-0.3,49c0,0-7.4,32.8-37,32.7c-29.6-0.1-144.9-0.3-173.2,0.3C20.2,136.7,12.1,124,5.1,106.5z M112.3,120.8c-1-5.8-1.9-26.1-2.7-43.2c-0.9-17.1,2.3-37.4,3.3-43.2c0,0-29.2-7.5-38-9.7 C64.6,48.1,62.3,62.6,62.5,78.4c0.2,15.8,1.7,27.9,11.7,51.7C82.9,127.9,112.3,120.8,112.3,120.8z M187.7,120.1c3-10.8,5.8-24.6,6.7-42.1c0.9-17.4-5.2-38.3-6.2-42c8.7-2.3,8.7-2.4,29-9.9 c0,0,5.8,30.9,6,52.2c0.1,21.3-6.6,52-6.6,52C196.4,122.6,196.4,122.5,187.7,120.1z M2.6,110.1l0.3,0.2c0,0,28,12.4,46.1,28.4c-2.8,4.7-22.1,0.2-31.7-5.1 C7.6,128.3,2.6,110.1,2.6,110.1z M5.5,47.4c7.2-17.5,15.4-30,43.7-29c28.3,1,143.5,2.2,173.1,2.5C252,21.2,259,54,259,54l-0.7,24.6L0,76.9 C0,76.9-1.7,64.8,5.5,47.4z M3,43.8l0.3-0.2c0,0,28.2-12,46.5-27.9C47,11,27.7,15.2,18,20.4 C8.3,25.6,3,43.8,3,43.8z",fillColor:d,fillOpacity:1,anchor:new google.maps.Point(0,0),strokeColor:"gold",strokeWeight:1,scale:.2,rotation:0};var e=p.getCenter(),f={id:a,latitude:e.lat(),longitude:e.lng(),icon:c,options:{draggable:!0,labelClass:"labels",labelAnchor:"5 20",labelContent:a+1}};b.markers.push(f)}function k(a){for(var c=0;c<b.markers.length;c++)b.markers[c].id==a&&b.markers.splice(c,1);void 0!=o[a]&&(o[a].setMap(null),o[a]=void 0),i(a)}b.map={center:{latitude:40.1451,longitude:-99.668},zoom:4},a.options={scrollwheel:!1,mapTypeId:"hybrid"},a.coordsUpdates=0,a.dynamicMoveCtr=0;var l,m=5,n=5,o=[],p="";b.markers=[],a.repeatHelper=[],a.buttonText=[],a.showPolylineIcon=[],a.showPolyline=[],a.showDrawingIcon=[],a.showIcon=[];for(var q=0;n>q;q++)a.repeatHelper[q]=q,a.buttonText.push("Add"),a.showIcon.push(!0),a.showDrawingIcon.push(!0),a.showPolylineIcon.push(!0);for(var r=0;m>r;r++)a.buttonText.push("Add"),a.showIcon.push(!0),a.showDrawingIcon.push(!0),a.showPolylineIcon.push(!0);g.promise(1).then(function(a){a.forEach(function(a){p=a.map})}),a.addPolyLine=function(a){i(a),l=a,google.maps.event.clearListeners(p,"click");var b;switch(a){case 0:b="#FF9494";break;case 1:b="#B2FFb2";break;case 2:b="#7575FF";break;default:b="#00ABD3"}var c={path:google.maps.SymbolPath.CIRCLE,scale:8,strokeColor:"#393"};"undefined"==typeof o[a]&&(o[a]=new google.maps.Polyline({strokeColor:b,strokeOpacity:1,strokeWeight:2,icons:[{icon:c,offset:"0%"},{icon:c,offset:"100%"}]})),o[a].setMap(p),google.maps.event.addListener(p,"click",h)};var s;a.startAnimation=function(){var a=0,b=0,c=n;s=window.setInterval(function(){if(b%=c,a=(a+1)%200,"undefined"!=typeof o[b]){var d=o[b].get("icons");d[0].offset=a/2+"%",o[b].set("icons",d)}b++},30)},a.stopAnimation=function(){clearInterval(s)},a.addMarkerToMap=function(b,c){switch(google.maps.event.clearListeners(p,"click"),b){case 0:a.showIcon[c]?(a.showIcon[c]=!1,a.buttonText[c]="Remove",j(c,"https://maps.google.com/mapfiles/kml/shapes/schools_maps.png")):(a.showIcon[c]=!0,a.buttonText[c]="Add",k(c));break;case 1:break;case 2:break;case 3:}},a.continueButtonCtrl=function(){c.path("/create/provideWrittenReport")},a.rotateMarker=function(a){b.markers[a].icon.rotation+=15;var c=b.markers[a].icon.rotation%360,d=b.markers[a].options.labelAnchor,e=d.split(" "),f=parseInt(e[0]),g=parseInt(e[1]),h=parseFloat(f),i=parseFloat(g),j=2,k=2;15>c?(i+=j,h-=k):90>=c?(i-=j,h-=k):180>=c?(i-=j,h+=k):270>=c?(i+=j,h+=k):360>c&&(i+=j,h-=k),b.markers[a].options.labelAnchor=h+" "+i};var t;a.mouseDown=function(b){t=f(function(){a.rotateMarker(b)},100)},a.mouseUp=function(){f.cancel(t)}}]),angular.module("clientApp").controller("ProvideWrittenReportCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("clientApp").controller("TypeOfCrashCtrl",["$scope","$rootScope","$location",function(a,b,c){a.selected=!1,a.typeOfCrash="Action",b.crashType="",a.setType=function(c){var d=["Midblock","4 Way Intersection",'"T" Intersection','"Y" Intersection',"Traffic Circle","Multi-Leg Intersection","On Ramp","Off Ramp","Rainroad Crossing","Other"];a.selected=!0,a.typeOfCrash=d[c],0==c?b.crashType=0:1==c||2==c||3==c||4==c?b.crashType=1:b.crashType=2},a["continue"]=function(){c.path("/create/specify-manually")}}]);